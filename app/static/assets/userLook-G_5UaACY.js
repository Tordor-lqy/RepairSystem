import{o as A,S as G,q as H,d as K,s as q}from"./SetOrderDialog-4vThfgFq.js";import{_ as F}from"./_plugin-vue_export-helper-x3n3nnut.js";import{e as Q,g as L}from"./VSelect-vc-x1x7s.js";import{e as s,bm as W,j as U,o as b,c as x,b as a,w as d,F as I,u as p,t as w,d as t,a8 as D,V as S,a as M,bJ as $,b0 as O,i as y,y as X,z as Y}from"./index-PSqsjCSN.js";import{V as Z}from"./VTable-STDIntoG.js";import{a as N,V as ee}from"./VCard-JZ6WHMNS.js";import{V as R,a as T}from"./VRow-SVgGgJmx.js";import{V as j}from"./VDialog-77CPTFay.js";import{r as le}from"./request-gdlVq-Xd.js";import{V as z}from"./VTextField-psUYnqz0.js";import"./locationapi-0BEEkayc.js";import"./VCheckbox-43WpQWPy.js";import"./VCheckboxBtn-Y1DE8lFh.js";import"./forwardRefs-y8pOSn8h.js";import"./VImg-iF59fwnb.js";import"./transition-xyKDfSS_.js";import"./dialog-transition-ECeo8dH8.js";import"./easing-imumzmxr.js";import"./VOverlay-7_drhASS.js";import"./lazy-LbIsDNYW.js";import"./index-2MG7DwKw.js";import"./ssrBoot-NHj6Hh8x.js";import"./createSimpleFunctional-PGWa7DpL.js";import"./VAvatar-AudbB9NE.js";import"./VDivider-z4buajAC.js";/* empty css              */const ae=f=>(X("data-v-6f72d225"),f=f(),Y(),f),oe=ae(()=>t("thead",null,[t("tr",null,[t("th",null," 报修编号 "),t("th",null," 故障类型 "),t("th",null," 报修时间 "),t("th",null," 故障细节 "),t("th",null," 故障地点 "),t("th",null," 修复状态 "),t("th",null," 是否公开 "),t("th",null," 操作 ")])],-1)),te={class:"text-center"},re={class:"btns"},ne={__name:"OrderTableUser",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(f){const c=s([]),_=s(1),k=s(14),V=s(null),n=s({}),m=s(!1),v=s(!1),g=s(!1),h=W(f,"modelValue"),u=async()=>{let l=await H(_.value,k.value,-1,-1,-1,-1,h.value);l.data.code==1&&(c.value=l.data.data.records,V.value=l.data.data.total)},i=async l=>{(await K(l)).data.code==1&&console.log("删除成功"),u()},r=async l=>{let o={order_id:l.order_id,final_location_id:l.final_location_id,damage_details:l.damage_details,user_id:l.user_id,order_is_repaired:l.order_is_repaired==1?0:1,order_is_public:l.order_is_public,worker_id:l.worker_id};await q(o),u()},B=async l=>{let o={order_id:l.order_id,final_location_id:l.final_location_id,damage_details:l.damage_details,user_id:l.user_id,order_is_repaired:l.order_is_repaired,order_is_public:l.order_is_public==1?0:1,worker_id:l.worker_id};await q(o),u()},E=l=>{n.value=l,v.value=!0},J=l=>{n.value=l,m.value=!0},P=l=>{n.value=l,g.value=!0};return U(_,(l,o)=>{u()}),u(),(l,o)=>(b(),x(I,null,[a(Z,{height:"80vh","fixed-header":"",hover:""},{default:d(()=>[oe,t("tbody",null,[(b(!0),x(I,null,O(p(c),e=>(b(),x("tr",{key:e.order_id},[t("td",null,w(e.order_id),1),t("td",null,w(e.damage_type_name),1),t("td",null,w(e.order_update_time),1),t("td",null,w(e.damage_details.length>15?e.damage_details.slice(0,14)+"...":e.damage_details),1),t("td",null,w(e.one_location_name+"-"+e.two_location_name+"-"+e.final_location_name),1),t("td",null,[a(Q,{color:e.order_is_repaired==1?"success":"error",onClick:C=>r(e)},{default:d(()=>[D(w(e.order_is_repaired==0?"未修复":"已修复"),1)]),_:2},1032,["color","onClick"])]),t("td",te,[e.order_is_public==1?(b(),M(S,{key:0,onClick:C=>B(e)},{default:d(()=>[D(" ri-eye-fill ")]),_:2},1032,["onClick"])):(b(),M(S,{key:1,onClick:C=>B(e)},{default:d(()=>[D(" ri-eye-off-line ")]),_:2},1032,["onClick"]))]),t("td",re,[a($,{icon:"ri-edit-box-fill",onClick:C=>P(e)},null,8,["onClick"]),a($,{icon:"ri-eye-2-line",color:"success",onClick:C=>J(e)},null,8,["onClick"]),a($,{icon:"ri-delete-bin-7-fill",color:"error",onClick:C=>E(e)},null,8,["onClick"])])]))),128))])]),_:1}),a(L,{class:"mt-10",modelValue:p(_),"onUpdate:modelValue":o[0]||(o[0]=e=>y(_)?_.value=e:null),length:Math.ceil(p(V)/p(k)),"total-visible":5},null,8,["modelValue","length"]),a(A,{order:p(n),"onUpdate:order":o[1]||(o[1]=e=>y(n)?n.value=e:null),show:p(m),"onUpdate:show":o[2]||(o[2]=e=>y(m)?m.value=e:null)},null,8,["order","show"]),a(G,{order:p(n),"onUpdate:order":o[3]||(o[3]=e=>y(n)?n.value=e:null),show:p(g),"onUpdate:show":o[4]||(o[4]=e=>y(g)?g.value=e:null),onUpdate:o[5]||(o[5]=e=>u())},null,8,["order","show"]),a(j,{modelValue:p(v),"onUpdate:modelValue":o[8]||(o[8]=e=>y(v)?v.value=e:null),width:"800px"},{default:d(()=>[a(N,{"max-width":"700px",width:"80vw","prepend-icon":"ri-add",text:"",title:`确认删除订单 (ID:${p(n).order_id})`},{actions:d(()=>[a(R,null,{default:d(()=>[a(T,null,{default:d(()=>[a($,{block:"",text:"确认删除",onClick:o[6]||(o[6]=e=>{i(p(n).order_id),v.value=!1})})]),_:1}),a(T,null,{default:d(()=>[a($,{block:"",text:"关闭",onClick:o[7]||(o[7]=e=>{v.value=!1})})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])],64))}},de=F(ne,[["__scopeId","data-v-6f72d225"]]),se=(f,c,_,k)=>le.get(`/api/admin/user/page?page=${f}&size=${c}&user_name=${_}&user_henau_number=${k}`),ue={class:"box"},ie={__name:"userLook",setup(f){const c=s(1),_=s(10),k=s([]),V=s(""),n=s(""),m=s(null),v=s(null),g=s(!1),h=async()=>{const u=await se(c.value,_.value,V.value==""?-1:V.value,n.value==""?-1:n.value);k.value=u.data.data.records,v.value=u.data.data.total};return h(),U(V,u=>{h()}),U(n,u=>{h()}),U(c,u=>{h()}),(u,i)=>(b(),x(I,null,[a(R,null,{default:d(()=>[a(T,null,{default:d(()=>[a(z,{modelValue:V.value,"onUpdate:modelValue":i[0]||(i[0]=r=>V.value=r),"prepend-inner-icon":"ri-user-line",placeholder:"Name","persistent-placeholder":""},null,8,["modelValue"])]),_:1}),a(T,null,{default:d(()=>[a(z,{modelValue:n.value,"onUpdate:modelValue":i[1]||(i[1]=r=>n.value=r),"prepend-inner-icon":"ri-user-line",placeholder:"henau_number","persistent-placeholder":""},null,8,["modelValue"])]),_:1})]),_:1}),t("div",ue,[(b(!0),x(I,null,O(k.value,r=>(b(),M(N,{class:"mx-10 my-10 card-user",subtitle:`学号:${r.user_henau_number} | 归属: ${r.user_section}`,title:`${r.user_name}(UID: ${r.user_id})`,key:r.user_id,onClick:B=>{m.value=r.user_id,g.value=!0}},{prepend:d(()=>[a(S,{color:"primary",icon:"ri-account-pin-box-fill"})]),append:d(()=>[a(S,{color:"success",icon:"ri-check"})]),default:d(()=>[a(ee)]),_:2},1032,["subtitle","title","onClick"]))),128))]),a(L,{class:"mt-3",modelValue:c.value,"onUpdate:modelValue":i[2]||(i[2]=r=>c.value=r),length:Math.ceil(v.value/_.value),"total-visible":5},null,8,["modelValue","length"]),a(j,{modelValue:g.value,"onUpdate:modelValue":i[4]||(i[4]=r=>g.value=r),width:"auto"},{default:d(()=>[a(N,{width:"90vw"},{default:d(()=>[D(" 用户ID"+w(m.value)+" 提交的报修订单 ",1),a(de,{modelValue:m.value,"onUpdate:modelValue":i[3]||(i[3]=r=>m.value=r)},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])],64))}},Fe=F(ie,[["__scopeId","data-v-fced085b"]]);export{Fe as default};
