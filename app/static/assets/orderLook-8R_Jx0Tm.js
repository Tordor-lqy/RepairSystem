import{o as L,S as O,q as R,d as j,s as D}from"./SetOrderDialog-4vThfgFq.js";import{_ as z}from"./_plugin-vue_export-helper-x3n3nnut.js";import{e as E,g as J}from"./VSelect-vc-x1x7s.js";import{e as n,j as M,o as m,c as b,b as a,w as d,F as S,u as i,t as p,d as t,a8 as h,V as U,a as C,bJ as g,b0 as P,i as c,y as A,z as G}from"./index-PSqsjCSN.js";import{V as H}from"./VTable-STDIntoG.js";import{a as K}from"./VCard-JZ6WHMNS.js";import{V as Q,a as I}from"./VRow-SVgGgJmx.js";import{V as W}from"./VDialog-77CPTFay.js";import"./locationapi-0BEEkayc.js";import"./request-gdlVq-Xd.js";import"./VCheckbox-43WpQWPy.js";import"./VCheckboxBtn-Y1DE8lFh.js";import"./VTextField-psUYnqz0.js";import"./index-2MG7DwKw.js";import"./transition-xyKDfSS_.js";import"./easing-imumzmxr.js";import"./forwardRefs-y8pOSn8h.js";import"./VImg-iF59fwnb.js";import"./dialog-transition-ECeo8dH8.js";import"./VOverlay-7_drhASS.js";import"./lazy-LbIsDNYW.js";import"./ssrBoot-NHj6Hh8x.js";import"./createSimpleFunctional-PGWa7DpL.js";import"./VAvatar-AudbB9NE.js";import"./VDivider-z4buajAC.js";/* empty css              */const X=f=>(A("data-v-b3c76496"),f=f(),G(),f),Y=X(()=>t("thead",null,[t("tr",null,[t("th",null," 报修编号 "),t("th",null," 故障类型 "),t("th",null," 报修时间 "),t("th",null," 故障细节 "),t("th",null," 故障地点 "),t("th",null," 修复状态 "),t("th",null," 是否公开 "),t("th",null," 操作 ")])],-1)),Z={class:"text-center"},ee={class:"btns"},le={__name:"orderTable",setup(f){const V=n([]),s=n(1),y=n(14),x=n(null),r=n({}),k=n(!1),u=n(!1),w=n(!1),_=async()=>{let l=await R(s.value,y.value,-1,-1,-1,-1,-1);l.data.code==1&&(V.value=l.data.data.records,x.value=l.data.data.total)},B=async l=>{(await j(l)).data.code==1&&console.log("删除成功"),_()},T=async l=>{let o={order_id:l.order_id,final_location_id:l.final_location_id,damage_details:l.damage_details,user_id:l.user_id,order_is_repaired:l.order_is_repaired==1?0:1,order_is_public:l.order_is_public,worker_id:l.worker_id};await D(o),_()},$=async l=>{let o={order_id:l.order_id,final_location_id:l.final_location_id,damage_details:l.damage_details,user_id:l.user_id,order_is_repaired:l.order_is_repaired,order_is_public:l.order_is_public==1?0:1,worker_id:l.worker_id};await D(o),_()},N=l=>{r.value=l,u.value=!0},q=l=>{r.value=l,k.value=!0},F=l=>{r.value=l,w.value=!0};return M(s,(l,o)=>{_()}),_(),(l,o)=>(m(),b(S,null,[a(H,{height:"80vh","fixed-header":"",hover:""},{default:d(()=>[Y,t("tbody",null,[(m(!0),b(S,null,P(i(V),e=>(m(),b("tr",{key:e.order_id},[t("td",null,p(e.order_id),1),t("td",null,p(e.damage_type_name),1),t("td",null,p(e.order_update_time),1),t("td",null,p(e.damage_details.length>15?e.damage_details.slice(0,14)+"...":e.damage_details),1),t("td",null,p(e.one_location_name+"-"+e.two_location_name+"-"+e.final_location_name),1),t("td",null,[a(E,{color:e.order_is_repaired==1?"success":"error",onClick:v=>T(e)},{default:d(()=>[h(p(e.order_is_repaired==0?"未修复":"已修复"),1)]),_:2},1032,["color","onClick"])]),t("td",Z,[e.order_is_public==1?(m(),C(U,{key:0,onClick:v=>$(e)},{default:d(()=>[h(" ri-eye-fill ")]),_:2},1032,["onClick"])):(m(),C(U,{key:1,onClick:v=>$(e)},{default:d(()=>[h(" ri-eye-off-line ")]),_:2},1032,["onClick"]))]),t("td",ee,[a(g,{icon:"ri-edit-box-fill",onClick:v=>F(e)},null,8,["onClick"]),a(g,{icon:"ri-eye-2-line",color:"success",onClick:v=>q(e)},null,8,["onClick"]),a(g,{icon:"ri-delete-bin-7-fill",color:"error",onClick:v=>N(e)},null,8,["onClick"])])]))),128))])]),_:1}),a(J,{class:"mt-10",modelValue:i(s),"onUpdate:modelValue":o[0]||(o[0]=e=>c(s)?s.value=e:null),length:Math.ceil(i(x)/i(y)),"total-visible":5},null,8,["modelValue","length"]),a(L,{order:i(r),"onUpdate:order":o[1]||(o[1]=e=>c(r)?r.value=e:null),show:i(k),"onUpdate:show":o[2]||(o[2]=e=>c(k)?k.value=e:null)},null,8,["order","show"]),a(O,{order:i(r),"onUpdate:order":o[3]||(o[3]=e=>c(r)?r.value=e:null),show:i(w),"onUpdate:show":o[4]||(o[4]=e=>c(w)?w.value=e:null),onUpdate:o[5]||(o[5]=e=>_())},null,8,["order","show"]),a(W,{modelValue:i(u),"onUpdate:modelValue":o[8]||(o[8]=e=>c(u)?u.value=e:null),width:"800px"},{default:d(()=>[a(K,{"max-width":"700px",width:"80vw","prepend-icon":"ri-add",text:"",title:`确认删除订单 (ID:${i(r).order_id})`},{actions:d(()=>[a(Q,null,{default:d(()=>[a(I,null,{default:d(()=>[a(g,{block:"",text:"确认删除",onClick:o[6]||(o[6]=e=>{B(i(r).order_id),u.value=!1})})]),_:1}),a(I,null,{default:d(()=>[a(g,{block:"",text:"关闭",onClick:o[7]||(o[7]=e=>{u.value=!1})})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])],64))}},oe=z(le,[["__scopeId","data-v-b3c76496"]]),Ue={__name:"orderLook",setup(f){return(V,s)=>(m(),C(oe))}};export{Ue as default};
