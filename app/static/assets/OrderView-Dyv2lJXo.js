import{q as ee}from"./orderapi-BY3sv2jG.js";import{_ as E,j as B,q as J,o as g,p as K,n as ae,w as te,x as le,y as oe,z as se,k as ne}from"./VChip-BAScr-gb.js";import{v as s,o as j,E as D,q as _,x as h,y as e,j as c,w as u,s as m,A as n,F as k,B as b,r as C,z as H,C as F,D as A}from"./index-mbHgxV2f.js";const O=i=>(F("data-v-71dbec98"),i=i(),A(),i),ie={class:"btns"},de={class:"tabs"},ue={class:"tab"},_e=O(()=>e("p",null,"损坏类型",-1)),ce={class:"tab"},re=O(()=>e("p",null,"一级地点",-1)),ve={key:0,class:"tab"},pe=O(()=>e("p",null,"二级地点",-1)),me={key:1,class:"tab"},he=O(()=>e("p",null,"三级地点",-1)),fe={class:"text-center"},ge={__name:"OrderViewTop",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(i){const d=s([]),v=s(null),y=s([]),$=s([]),p=s([]),a=s(null),f=s(null),w=s(null),P=j(i,"modelValue"),U=s(1),r=s(1),I=s(6),z=s(0),q=s(!1),L=s(""),M=s("green-darken-1"),G=(l,o)=>{q.value=!0,L.value=l,o==1?M.value="green-darken-1":o==-1?M.value="red-darken-3":M.value="blue-darken-1"},N=s(!1),Q=async()=>{const l=await te();d.value=l.data.data},R=async()=>{const l=await le();y.value=l.data.data},W=async()=>{const l=await oe(a.value);$.value=l.data.data,console.log($.value)},X=async()=>{const l=await se(f.value);p.value=l.data.data,l.status!=200&&G(l.data.msg,-1),console.log(p.value)},x=async()=>{const l=await ee(r.value,I.value,a.value==null?-1:a.value,f.value==null?-1:f.value,w.value==null?-1:w.value,v.value==null?-1:v.value);if(U.value!=r.value&&l.data.code!=1){G(l.data.msg,2),r.value=U.value;return}P.value=l.data.data.records,z.value=l.data.data.total,U.value=r.value};D(a,async l=>{f.value=null,w.value=null,r.value=1,x(),W()}),D(f,async l=>{w.value=null,r.value=1,x(),X()}),D(w,async l=>{r.value=1,x()}),D(v,async l=>{r.value=1,x()}),Q(),R(),x();function Y(){r.value--,r.value<1&&(r.value=1),x()}function Z(){r.value++,r.value>=Math.ceil(z.value/I.value)&&(r.value=Math.ceil(z.value/I.value)),x()}return(l,o)=>(_(),h(k,null,[e("div",ie,[c(B,{class:"top-btn",density:"default",icon:"mdi-filter-variant",onClick:o[0]||(o[0]=t=>N.value=!0)}),c(B,{class:"up-btn",icon:"mdi-menu-left",onClick:o[1]||(o[1]=t=>Y())}),c(B,null,{default:u(()=>[m(n(r.value)+" / "+n(Math.ceil(z.value/I.value)),1)]),_:1}),c(B,{class:"down-btn",icon:"mdi-menu-right",onClick:o[2]||(o[2]=t=>Z())})]),c(K,{modelValue:N.value,"onUpdate:modelValue":o[7]||(o[7]=t=>N.value=t),transition:"dialog-bottom-transition",width:"auto"},{default:u(()=>[c(J,{width:"90vw",height:"80vh","prepend-icon":"mdi-filter-variant",title:"分类"},{default:u(()=>[e("div",de,[e("div",ue,[_e,c(g,{style:{margin:"7px"},variant:v.value==null?"elevated":"outlined",onClick:o[3]||(o[3]=t=>v.value=null)},{default:u(()=>[m(" 全部")]),_:1},8,["variant"]),(_(!0),h(k,null,b(d.value,t=>(_(),C(g,{style:{margin:"7px"},variant:t.damage_type_id==v.value?"elevated":"outlined",onClick:T=>v.value=t.damage_type_id},{default:u(()=>[m(n(t.damage_type_name),1)]),_:2},1032,["variant","onClick"]))),256))]),e("div",ce,[re,c(g,{style:{margin:"7px"},variant:a.value==null?"elevated":"outlined",onClick:o[4]||(o[4]=t=>a.value=null)},{default:u(()=>[m(" 全部")]),_:1},8,["variant"]),(_(!0),h(k,null,b(y.value,t=>(_(),C(g,{style:{margin:"7px","font-size":"12px"},variant:t.one_location_id==a.value?"elevated":"outlined",onClick:T=>a.value=t.one_location_id},{default:u(()=>[m(n(t.one_location_name),1)]),_:2},1032,["variant","onClick"]))),256))]),a.value!=null?(_(),h("div",ve,[pe,c(g,{style:{margin:"7px"},variant:f.value==null?"elevated":"outlined",onClick:o[5]||(o[5]=t=>f.value=null)},{default:u(()=>[m("全部")]),_:1},8,["variant"]),(_(!0),h(k,null,b($.value,t=>(_(),C(g,{style:{margin:"7px","font-size":"12px"},variant:t.two_location_id==f.value?"elevated":"outlined",onClick:T=>f.value=t.two_location_id},{default:u(()=>[m(n(t.two_location_name),1)]),_:2},1032,["variant","onClick"]))),256))])):H("",!0),f.value!=null?(_(),h("div",me,[he,c(g,{style:{margin:"7px"},variant:w.value==null?"elevated":"outlined",onClick:o[6]||(o[6]=t=>w.value=null)},{default:u(()=>[m("全部")]),_:1},8,["variant"]),(_(!0),h(k,null,b(p.value,t=>(_(),C(g,{style:{margin:"7px","font-size":"12px"},variant:t.final_location_id==w.value?"elevated":"outlined",onClick:T=>w.value=t.final_location_id},{default:u(()=>[m(n(t.final_location_name),1)]),_:2},1032,["variant","onClick"]))),256))])):H("",!0)])]),_:1})]),_:1},8,["modelValue"]),c(ae,{modelValue:q.value,"onUpdate:modelValue":o[8]||(o[8]=t=>q.value=t),color:M.value,style:{"margin-bottom":"90vh"}},{text:u(()=>[e("div",fe,n(L.value),1)]),_:1},8,["modelValue","color"])],64))}},we=E(ge,[["__scopeId","data-v-71dbec98"]]),V=i=>(F("data-v-2a4a946c"),i=i(),A(),i),ye={class:"order_top"},$e={class:"title text-center my-6"},xe={class:"text-h5"},ke={class:"title"},Ve=V(()=>e("div",{class:"t"},[e("hr"),e("span",{class:"px-3"},"故障说明"),e("hr")],-1)),be={class:"text-area"},Ce={class:"title"},Ie=V(()=>e("div",{class:"t"},[e("hr"),e("span",{class:"px-3"},"故障位置"),e("hr")],-1)),ze={class:"text-area"},Me={class:"title"},Be=V(()=>e("div",{class:"t"},[e("hr"),e("span",{class:"px-3"},"其他信息"),e("hr")],-1)),De={class:"text-area"},Oe={class:"info"},Se=V(()=>e("div",{class:"l"},"状态",-1)),Ue={class:"r"},qe={class:"info"},Ne=V(()=>e("div",{class:"l"},"报修时间",-1)),Te={class:"r"},je={class:"info"},Ee=V(()=>e("div",{class:"l"},"编号",-1)),Fe={class:"r"},Ae={__name:"OrderDialog",props:{order:{},orderModifiers:{},show:{},showModifiers:{}},emits:["update:order","update:show"],setup(i){const d=j(i,"order"),v=j(i,"show");return(y,$)=>(_(),C(K,{modelValue:v.value,"onUpdate:modelValue":$[0]||($[0]=p=>v.value=p),transition:"dialog-bottom-transition",width:"auto"},{default:u(()=>[c(J,{width:"90vw",height:"80vh","max-width":"800px","prepend-icon":"mdi-reorder-horizontal",title:"详细信息"},{default:u(()=>[e("div",ye,[e("div",$e,[e("div",xe,n(d.value.damage_type_name),1)]),e("div",ke,[Ve,e("div",be,n(d.value.damage_details),1)]),e("div",Ce,[Ie,e("div",ze,n(d.value.one_location_name+"-"+d.value.two_location_name+"-"+d.value.final_location_name),1)]),e("div",Me,[Be,e("div",De,[e("div",Oe,[Se,e("div",Ue,[c(g,{color:d.value.order_is_repaired==1?"success":"error"},{default:u(()=>[m(n(d.value.order_is_repaired==0?"未修复":"已修复"),1)]),_:1},8,["color"])])]),e("div",qe,[Ne,e("div",Te,n(d.value.order_update_time),1)]),e("div",je,[Ee,e("div",Fe,n(d.value.order_id),1)])])])])]),_:1})]),_:1},8,["modelValue"]))}},Le=E(Ae,[["__scopeId","data-v-2a4a946c"]]),S=i=>(F("data-v-c64b1a2e"),i=i(),A(),i),Ge={key:0,class:"card_table"},He=["onClick"],Je={class:"pr-4"},Ke={style:{"font-size":"12px"},class:"pt-2"},Pe={class:"pt-2"},Qe={class:"pt-2"},Re=S(()=>e("br",null,null,-1)),We=S(()=>e("br",null,null,-1)),Xe=S(()=>e("br",null,null,-1)),Ye={key:1},Ze={class:"prompt"},ea=S(()=>e("h3",{class:"mt-4"},"没有相关的报修信息",-1)),aa={__name:"OrderView",setup(i){const d=s([]),v=s(!1),y=s(null);return($,p)=>(_(),h(k,null,[c(we,{modelValue:d.value,"onUpdate:modelValue":p[0]||(p[0]=a=>d.value=a)},null,8,["modelValue"]),d.value.length!=0?(_(),h("div",Ge,[(_(!0),h(k,null,b(d.value,a=>(_(),h("div",{class:"card",onClick:f=>{y.value=a,v.value=!0}},[e("div",Je,[e("h3",null,n(a.damage_type_name),1),e("p",Ke," 故障详情 : "+n(a.damage_details.length>10?a.damage_details.slice(0,10)+"...":a.damage_details),1),e("h6",Pe,n(a.one_location_name+"-"+a.two_location_name+"-"+a.final_location_name),1),e("h6",Qe,n(a.order_update_time),1)]),e("div",null,[c(g,{color:a.order_is_repaired==1?"success":"error"},{default:u(()=>[m(n(a.order_is_repaired==0?"未修复":"已修复"),1)]),_:2},1032,["color"])])],8,He))),256)),Re,We,Xe])):(_(),h("div",Ye,[e("div",Ze,[c(ne,{class:"empty-icon"},{default:u(()=>[m(" mdi-file-find-outline ")]),_:1}),ea])])),c(Le,{show:v.value,"onUpdate:show":p[1]||(p[1]=a=>v.value=a),order:y.value,"onUpdate:order":p[2]||(p[2]=a=>y.value=a)},null,8,["show","order"])],64))}},sa=E(aa,[["__scopeId","data-v-c64b1a2e"]]);export{sa as default};
